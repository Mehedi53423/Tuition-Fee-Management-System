import*as t from"react";import n,{createContext as r,useContext as e,useLayoutEffect as o,useEffect as a,useState as i,useRef as s,useCallback as u,useMemo as l,forwardRef as c,createElement as f}from"react";var d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)};var p=function(){return(p=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function v(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]])}return r}var m=function(t){return{isEnabled:function(n){return t.some((function(t){return!!n[t]}))}}},y={measureLayout:m(["layout","layoutId","drag"]),animation:m(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:m(["exit"]),drag:m(["drag","dragControls"]),focus:m(["whileFocus"]),hover:m(["whileHover","onHoverStart","onHoverEnd"]),tap:m(["whileTap","onTap","onTapStart","onTapCancel"]),pan:m(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:m(["whileInView","onViewportEnter","onViewportLeave"])};var g=r({strict:!1}),h=Object.keys(y),w=h.length;var b=r({transformPagePoint:function(t){return t},isStatic:!1,reducedMotion:"never"}),S=r({});var O=r(null),x="undefined"!=typeof window,E=x?o:a,j={current:null},P=!1;function C(){return!P&&function(){if(P=!0,"undefined"!=typeof window)if(window.matchMedia){var t=window.matchMedia("(prefers-reduced-motion)"),n=function(){return j.current=t.matches};t.addListener(n),n()}else j.current=!1}(),function(t,n){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var e,o,a=r.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(e=a.next()).done;)i.push(e.value)}catch(t){o={error:t}}finally{try{e&&!e.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}(i(j.current),1)[0]}function T(t,n,r,o){var i,u,l=e(g),c=e(S).visualElement,f=e(O),d=(i=C(),"never"!==(u=e(b).reducedMotion)&&("always"===u||i)),p=s(void 0);o||(o=l.renderer),!p.current&&o&&(p.current=o(t,{visualState:n,parent:c,props:r,presenceId:null==f?void 0:f.id,blockInitialAnimation:!1===(null==f?void 0:f.initial),shouldReduceMotion:d}));var v=p.current;return E((function(){null==v||v.syncRender()})),a((function(){var t;null===(t=null==v?void 0:v.animationState)||void 0===t||t.animateChanges()})),E((function(){return function(){return null==v?void 0:v.notifyUnmount()}}),[]),v}function V(t){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function k(t){return"string"==typeof t||function(t){return Array.isArray(t)}(t)}function L(t){var n;return"function"==typeof(null===(n=t.animate)||void 0===n?void 0:n.start)||k(t.initial)||k(t.animate)||k(t.whileHover)||k(t.whileDrag)||k(t.whileTap)||k(t.whileFocus)||k(t.exit)}function A(t){var n=function(t,n){if(L(t)){var r=t.initial,e=t.animate;return{initial:!1===r||k(r)?r:void 0,animate:k(e)?e:void 0}}return!1!==t.inherit?n:{}}(t,e(S)),r=n.initial,o=n.animate;return l((function(){return{initial:r,animate:o}}),[M(r),M(o)])}function M(t){return Array.isArray(t)?t.join(" "):t}function R(t){var n=s(null);return null===n.current&&(n.current=t()),n.current}const B="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),D="undefined"!=typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(B()),1/60*1e3);let X=!0,Y=!1,H=!1;const I={delta:0,timestamp:0},W=["read","update","preRender","render","postRender"],F=W.reduce((t,n)=>(t[n]=function(t){let n=[],r=[],e=0,o=!1,a=!1;const i=new WeakSet,s={schedule:(t,a=!1,s=!1)=>{const u=s&&o,l=u?n:r;return a&&i.add(t),-1===l.indexOf(t)&&(l.push(t),u&&o&&(e=n.length)),t},cancel:t=>{const n=r.indexOf(t);-1!==n&&r.splice(n,1),i.delete(t)},process:u=>{if(o)a=!0;else{if(o=!0,[n,r]=[r,n],r.length=0,e=n.length,e)for(let r=0;r<e;r++){const e=n[r];e(u),i.has(e)&&(s.schedule(e),t())}o=!1,a&&(a=!1,s.process(u))}}};return s}(()=>Y=!0),t),{});W.reduce((t,n)=>{const r=F[n];return t[n]=(t,n=!1,e=!1)=>(Y||z(),r.schedule(t,n,e)),t},{}),W.reduce((t,n)=>(t[n]=F[n].cancel,t),{}),W.reduce((t,n)=>(t[n]=()=>F[n].process(I),t),{});const Z=t=>F[t].process(I),_=t=>{Y=!1,I.delta=X?1/60*1e3:Math.max(Math.min(t-I.timestamp,40),1),I.timestamp=t,H=!0,W.forEach(Z),H=!1,Y&&(X=!1,D(_))},z=()=>{Y=!0,X=!0,H||D(_)};const U={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},N=Object.assign(Object.assign({},U),{transform:(K=0,$=1,t=>Math.max(Math.min(t,$),K))});var K,$;const q=Object.assign(Object.assign({},U),{default:1}),G=t=>({test:n=>function(t){return"string"==typeof t}(n)&&n.endsWith(t)&&1===n.split(" ").length,parse:parseFloat,transform:n=>`${n}${t}`}),J=G("deg"),Q=G("%"),tt=G("px"),nt=Object.assign(Object.assign({},Q),{parse:t=>Q.parse(t)/100,transform:t=>Q.transform(100*t)});var rt=function(t){return Boolean(null!==t&&"object"==typeof t&&t.getVelocity)},et=p(p({},U),{transform:Math.round}),ot={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,size:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,rotate:J,rotateX:J,rotateY:J,rotateZ:J,scale:q,scaleX:q,scaleY:q,scaleZ:q,skew:J,skewX:J,skewY:J,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:N,originX:nt,originY:nt,originZ:tt,zIndex:et,fillOpacity:N,strokeOpacity:N,numOctaves:et},at={},it=["","X","Y","Z"],st=["transformPerspective","x","y","z"];function ut(t,n){return st.indexOf(t)-st.indexOf(n)}["translate","scale","rotate","skew"].forEach((function(t){return it.forEach((function(n){return st.push(t+n)}))}));var lt=new Set(st);function ct(t){return lt.has(t)}var ft=new Set(["originX","originY","originZ"]);function dt(t){return ft.has(t)}function pt(t){var n,r=rt(t)?t.get():t;return n=r,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?r.toValue():r}var vt=!1,mt=1;var yt=r({}),gt=r({});var ht=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}d(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},n.prototype.componentDidUpdate=function(){},n.prototype.updateProps=function(){var t=this.props,n=t.visualElement,r=t.props;n&&n.setProps(r)},n.prototype.render=function(){return this.props.children},n}(n.Component);function wt(n){var r=n.preloadedFeatures,o=n.createVisualElement,a=n.projectionNodeConstructor,i=n.useRender,s=n.useVisualState,l=n.Component;return r&&function(t){for(var n in t)null!==t[n]&&("projectionNodeConstructor"===n?y.projectionNodeConstructor=t[n]:y[n].Component=t[n])}(r),c((function(n,r){var c=function(t){var n,r=t.layoutId,o=null===(n=e(yt))||void 0===n?void 0:n.id;return o&&void 0!==r?o+"-"+r:r}(n);n=p(p({},n),{layoutId:c});var f=e(b),d=null,v=A(n),m=f.isStatic?void 0:R((function(){if(vt)return mt++})),O=s(n,f.isStatic);return!f.isStatic&&x&&(v.visualElement=T(l,O,p(p({},f),n),o),function(t,n,r,o){var a,i=n.layoutId,s=n.layout,u=n.drag,l=n.dragConstraints,c=n.layoutScroll,f=e(gt);o&&r&&!(null==r?void 0:r.projection)&&(r.projection=new o(t,r.getLatestValues(),null===(a=r.parent)||void 0===a?void 0:a.projection),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(u)||l&&V(l),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:f,layoutScroll:c}))}(m,n,v.visualElement,a||y.projectionNodeConstructor),d=function(n,r,o){var a=[];if(e(g),!r)return null;for(var i=0;i<w;i++){var s=h[i],u=y[s],l=u.isEnabled,c=u.Component;l(n)&&c&&a.push(t.createElement(c,p({key:s},n,{visualElement:r})))}return a}(n,v.visualElement)),t.createElement(ht,{visualElement:v.visualElement,props:p(p({},f),n)},d,t.createElement(S.Provider,{value:v},i(l,n,m,function(t,n,r){return u((function(e){var o;e&&(null===(o=t.mount)||void 0===o||o.call(t,e)),n&&(e?n.mount(e):n.unmount()),r&&("function"==typeof r?r(e):V(r)&&(r.current=e))}),[n])}(O,v.visualElement,r),O,f.isStatic,v.visualElement)))}))}var bt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function St(t){return"string"==typeof t&&!t.includes("-")&&!!(bt.indexOf(t)>-1||/[A-Z]/.test(t))}function Ot(t,n){var r=n.layout,e=n.layoutId;return ct(t)||dt(t)||(r||void 0!==e)&&(!!at[t]||"opacity"===t)}var xt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Et(t){return t.startsWith("--")}var jt=function(t,n){return n&&"number"==typeof t?n.transform(t):t};function Pt(t,n,r,e){var o,a=t.style,i=t.vars,s=t.transform,u=t.transformKeys,l=t.transformOrigin;u.length=0;var c=!1,f=!1,d=!0;for(var p in n){var v=n[p];if(Et(p))i[p]=v;else{var m=ot[p],y=jt(v,m);if(ct(p)){if(c=!0,s[p]=y,u.push(p),!d)continue;v!==(null!==(o=m.default)&&void 0!==o?o:0)&&(d=!1)}else dt(p)?(l[p]=y,f=!0):a[p]=y}}c?a.transform=function(t,n,r,e){var o=t.transform,a=t.transformKeys,i=n.enableHardwareAcceleration,s=void 0===i||i,u=n.allowTransformNone,l=void 0===u||u,c="";a.sort(ut);for(var f=!1,d=a.length,p=0;p<d;p++){var v=a[p];c+="".concat(xt[v]||v,"(").concat(o[v],") "),"z"===v&&(f=!0)}return!f&&s?c+="translateZ(0)":c=c.trim(),e?c=e(o,r?"":c):l&&r&&(c="none"),c}(t,r,d,e):e?a.transform=e({},""):!n.transform&&a.transform&&(a.transform="none"),f&&(a.transformOrigin=function(t){var n=t.originX,r=void 0===n?"50%":n,e=t.originY,o=void 0===e?"50%":e,a=t.originZ,i=void 0===a?0:a;return"".concat(r," ").concat(o," ").concat(i)}(l))}var Ct=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Tt(t,n,r){for(var e in n)rt(n[e])||Ot(e,r)||(t[e]=n[e])}function Vt(t,n,r){var e={};return Tt(e,t.style||{},t),Object.assign(e,function(t,n,r){var e=t.transformTemplate;return l((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};Pt(t,n,{enableHardwareAcceleration:!r},e);var o=t.style;return p(p({},t.vars),o)}),[n])}(t,n,r)),t.transformValues&&(e=t.transformValues(e)),e}function kt(t,n,r){var e={},o=Vt(t,n,r);return Boolean(t.drag)&&!1!==t.dragListener&&(e.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),e.style=o,e}var Lt=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function At(t){return Lt.has(t)}var Mt,Rt=function(t){return!At(t)};try{(Mt=require("@emotion/is-prop-valid").default)&&(Rt=function(t){return t.startsWith("on")?!At(t):Mt(t)})}catch(t){}function Bt(t,n,r){return"string"==typeof t?t:tt.transform(n+r*t)}var Dt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xt={offset:"strokeDashoffset",array:"strokeDasharray"};function Yt(t,n,r,e){var o=n.attrX,a=n.attrY,i=n.originX,s=n.originY,u=n.pathLength,l=n.pathSpacing,c=void 0===l?1:l,f=n.pathOffset,d=void 0===f?0:f;Pt(t,v(n,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),r,e),t.attrs=t.style,t.style={};var p=t.attrs,m=t.style,y=t.dimensions;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(void 0!==i||void 0!==s||m.transform)&&(m.transformOrigin=function(t,n,r){var e=Bt(n,t.x,t.width),o=Bt(r,t.y,t.height);return"".concat(e," ").concat(o)}(y,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==o&&(p.x=o),void 0!==a&&(p.y=a),void 0!==u&&function(t,n,r,e,o){void 0===r&&(r=1),void 0===e&&(e=0),void 0===o&&(o=!0),t.pathLength=1;var a=o?Dt:Xt;t[a.offset]=tt.transform(-e);var i=tt.transform(n),s=tt.transform(r);t[a.array]="".concat(i," ").concat(s)}(p,u,c,d,!1)}var Ht=function(){return p(p({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function It(t,n){var r=l((function(){var r=Ht();return Yt(r,n,{enableHardwareAcceleration:!1},t.transformTemplate),p(p({},r.attrs),{style:p({},r.style)})}),[n]);if(t.style){var e={};Tt(e,t.style,t),r.style=p(p({},e),r.style)}return r}function Wt(t){void 0===t&&(t=!1);return function(n,r,e,o,a,i){var s=a.latestValues,u=(St(n)?It:kt)(r,s,i),l=function(t,n,r){var e={};for(var o in t)(Rt(o)||!0===r&&At(o)||!n&&!At(o)||t.draggable&&o.startsWith("onDrag"))&&(e[o]=t[o]);return e}(r,"string"==typeof n,t),c=p(p(p({},l),u),{ref:o});return e&&(c["data-projection-id"]=e),f(n,c)}}var Ft=/([a-z])([A-Z])/g;var Zt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function _t(t,n){for(var r in function(t,n,r,e){var o=n.style,a=n.vars;for(var i in Object.assign(t.style,o,e&&e.getProjectionStyles(r)),a)t.style.setProperty(i,a[i])}(t,n),n.attrs)t.setAttribute(Zt.has(r)?r:r.replace(Ft,"$1-$2").toLowerCase(),n.attrs[r])}function zt(t){var n=t.style,r={};for(var e in n)(rt(n[e])||Ot(e,t))&&(r[e]=n[e]);return r}function Ut(t,n,r,e){var o=t.scrapeMotionValuesFromProps,a=t.createRenderState,i=t.onMount,s={latestValues:Kt(n,r,e,o),renderState:a()};return i&&(s.mount=function(t){return i(n,t,s)}),s}var Nt=function(t){return function(n,r){var o=e(S),a=e(O);return r?Ut(t,n,o,a):R((function(){return Ut(t,n,o,a)}))}};function Kt(t,n,r,e){var o={},a=!1===(null==r?void 0:r.initial),i=e(t);for(var s in i)o[s]=pt(i[s]);var u=t.initial,l=t.animate,c=L(t),f=function(t){return Boolean(L(t)||t.variants)}(t);n&&f&&!c&&!1!==t.inherit&&(null!=u||(u=n.initial),null!=l||(l=n.animate));var d,p=a||!1===u,m=p?l:u;!m||"boolean"==typeof m||"object"==typeof(d=m)&&"function"==typeof d.start||(Array.isArray(m)?m:[m]).forEach((function(n){var r=function(t,n,r,e,o){var a;return void 0===e&&(e={}),void 0===o&&(o={}),"function"==typeof n&&(n=n(null!=r?r:t.custom,e,o)),"string"==typeof n&&(n=null===(a=t.variants)||void 0===a?void 0:a[n]),"function"==typeof n&&(n=n(null!=r?r:t.custom,e,o)),n}(t,n);if(r){var e=r.transitionEnd;r.transition;var a=v(r,["transitionEnd","transition"]);for(var i in a){var s=a[i];if(Array.isArray(s))s=s[p?s.length-1:0];null!==s&&(o[i]=s)}for(var i in e)o[i]=e[i]}}));return o}var $t={useVisualState:Nt({scrapeMotionValuesFromProps:function(t){var n=zt(t);for(var r in t){if(rt(t[r]))n["x"===r||"y"===r?"attr"+r.toUpperCase():r]=t[r]}return n},createRenderState:Ht,onMount:function(t,n,r){var e=r.renderState,o=r.latestValues;try{e.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}Yt(e,o,{enableHardwareAcceleration:!1},t.transformTemplate),_t(n,e)}})},qt={useVisualState:Nt({scrapeMotionValuesFromProps:zt,createRenderState:Ct})};var Gt=function(t){function n(n,r){return void 0===r&&(r={}),wt(t(n,r))}if("undefined"==typeof Proxy)return n;var r=new Map;return new Proxy(n,{get:function(t,e){return r.has(e)||r.set(e,n(e)),r.get(e)}})}((function(t,n,r,e,o){var a=n.forwardMotionProps,i=void 0!==a&&a,s=St(t)?$t:qt;return p(p({},s),{preloadedFeatures:r,useRender:Wt(i),createVisualElement:e,projectionNodeConstructor:o,Component:t})}));export{Gt as m};
