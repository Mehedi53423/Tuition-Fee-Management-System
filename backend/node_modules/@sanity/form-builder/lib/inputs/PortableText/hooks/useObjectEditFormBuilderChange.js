"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useObjectEditFormBuilderChange = useObjectEditFormBuilderChange;

var _react = require("react");

/* eslint-disable no-console */
// This hook will forward patches to the root onChange from the forms of the embedded objects.
function useObjectEditFormBuilderChange(onChange, patches$) {
  var onObjectEditFormBuilderChange = (0, _react.useCallback)((patchEvent, path) => {
    var prefixedEvent = patchEvent;
    path.slice(0).reverse().forEach(segment => {
      prefixedEvent = prefixedEvent.prefixAll(segment);
    });
    prefixedEvent.patches.map(patch => patches$.next(patch));
    onChange(prefixedEvent);
  }, [onChange, patches$]);
  return (0, _react.useMemo)(() => ({
    onObjectEditFormBuilderChange
  }), [onObjectEditFormBuilderChange]);
}