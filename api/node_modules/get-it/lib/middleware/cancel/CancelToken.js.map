{"version":3,"sources":["../../../src/middleware/cancel/CancelToken.js"],"names":["Cancel","require","CancelToken","executor","TypeError","resolvePromise","promise","Promise","resolve","message","reason","source","cancel","token","can","module","exports"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AAEA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AAAA;;AAC7B,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,UAAM,IAAIC,SAAJ,CAAc,8BAAd,CAAN;AACD;;AAED,MAAIC,cAAc,GAAG,IAArB;AACA,OAAKC,OAAL,GAAe,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AACpCH,IAAAA,cAAc,GAAGG,OAAjB;AACD,GAFc,CAAf;AAIAL,EAAAA,QAAQ,CAAC,UAAAM,OAAO,EAAI;AAClB,QAAI,KAAI,CAACC,MAAT,EAAiB;AACf;AACA;AACD;;AAED,IAAA,KAAI,CAACA,MAAL,GAAc,IAAIV,MAAJ,CAAWS,OAAX,CAAd;AACAJ,IAAAA,cAAc,CAAC,KAAI,CAACK,MAAN,CAAd;AACD,GARO,CAAR;AASD;;AAEDR,WAAW,CAACS,MAAZ,GAAqB,YAAW;AAC9B,MAAIC,MAAJ;AACA,MAAMC,KAAK,GAAG,IAAIX,WAAJ,CAAgB,UAAAY,GAAG,EAAI;AACnCF,IAAAA,MAAM,GAAGE,GAAT;AACD,GAFa,CAAd;AAIA,SAAO;AACLD,IAAAA,KAAK,EAAEA,KADF;AAELD,IAAAA,MAAM,EAAEA;AAFH,GAAP;AAID,CAVD;;AAYAG,MAAM,CAACC,OAAP,GAAiBd,WAAjB","sourcesContent":["const Cancel = require('./Cancel')\n\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.')\n  }\n\n  let resolvePromise = null\n  this.promise = new Promise(resolve => {\n    resolvePromise = resolve\n  })\n\n  executor(message => {\n    if (this.reason) {\n      // Cancellation has already been requested\n      return\n    }\n\n    this.reason = new Cancel(message)\n    resolvePromise(this.reason)\n  })\n}\n\nCancelToken.source = function() {\n  let cancel\n  const token = new CancelToken(can => {\n    cancel = can\n  })\n\n  return {\n    token: token,\n    cancel: cancel\n  }\n}\n\nmodule.exports = CancelToken\n"],"file":"CancelToken.js"}